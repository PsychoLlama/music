var Song=function(){"use strict";function t(t,e,n){var o=document.createElement("audio");return t&&o.setAttribute("data-title",t),e&&(o.src=e),n&&o.setAttribute("data-img",n),o}function e(e,n){if(0!==e.length){for(var o=0;o<e.length;o++){var s=t(e[o].title,e[o].src,e[o].img);n.push(s)}return n}}return Song=function(t){this.repeat=!1,this.playlist=[],e(t,this.playlist),this.songNumber=0,this.onsongchange},Song.prototype.history=[],Song.prototype.updateHistory=function(t){var e=Song.prototype.history.length-1;Song.prototype.history[e]!==t&&Song.prototype.history.push(t)},Song.prototype.shuffle=function(){return this.songNumber=0,this.playlist.sort(function(){return Math.floor(3*Math.random())-1}),this.resetSongs(),this.onsongchange&&this.onsongchange(),this.playlist},Song.prototype.next=function(){var t=this.playlist.length-1,e=this.songNumber===t,n=this.repeat;if(this.resetSongs(),e&&n)this.songNumber=0;else{if(e&&!n)return void 0;this.songNumber<t&&this.songNumber++}return this.updateHistory(this.getSong()),this.onsongchange&&this.onsongchange(),this.getSong()},Song.prototype.previous=function(){var t=this.getSong();return t.currentTime>5?(this.resetSongs(),t):(0===this.songNumber?this.songNumber=this.playlist.length-1:this.songNumber>0&&this.songNumber--,this.resetSongs(),this.updateHistory(this.getSong()),this.onsongchange&&this.onsongchange(),this.getSong())},Song.prototype.resetSongs=function(){this.playlist.forEach(function(t){t.pause&&t.pause(),t.currentTime&&(t.currentTime=0)})},Song.prototype.getSong=function(){return this.playlist[this.songNumber]},Song.prototype.getAlbum=function(t){var e;e=t?t.getAttribute("data-img"):this.getSong().getAttribute("data-img");var n=document.createElement("img");return n.src=e,n},Song.prototype.getTitle=function(t){var e;return e=t?t.getAttribute("data-title"):this.getSong().getAttribute("data-title"),e?e:void 0},Song}();