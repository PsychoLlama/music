var Song=function(){"use strict";function t(t,n,o){var e=document.createElement("audio");return t&&e.setAttribute("data-title",t),n&&(e.src=n),o&&e.setAttribute("data-img",o),e}function n(n,o){if(0!==n.length){for(var e=0;e<n.length;e++){var s=t(n[e].title,n[e].src,n[e].img);o.push(s)}return o}}return Song=function(t){this.repeat=!1,this.playlist=[],n(t,this.playlist),this.songNumber=0,this.onsongchange},Song.prototype.history=[],Song.prototype.updateHistory=function(t){var n=Song.prototype.history.length-1;Song.prototype.history[n]!==t&&Song.prototype.history.push(t)},Song.prototype.shuffle=function(){return this.songNumber=0,this.playlist.sort(function(){return Math.floor(3*Math.random())-1}),this.resetSongs(),this.onsongchange&&this.onsongchange(),this.playlist},Song.prototype.next=function(){var t=this.playlist.length-1,n=this.songNumber===t,o=this.repeat;if(this.resetSongs(),n&&o)this.songNumber=0;else{if(n&&!o)return void 0;this.songNumber<t&&this.songNumber++}return this.updateHistory(this.getSong()),this.onsongchange&&this.onsongchange(),this.getSong()},Song.prototype.previous=function(){var t=this.getSong();return t.currentTime>5?(this.resetSongs(),t):(0===this.songNumber?this.songNumber=this.playlist.length-1:this.songNumber>0&&this.songNumber--,this.resetSongs(),this.updateHistory(this.getSong()),this.onsongchange&&this.onsongchange(),this.getSong())},Song.prototype.skipTo=function(t){return t>=this.playlist.length||0>t?void 0:t||0===t?(this.resetSongs(),this.songNumber=t,this.updateHistory(this.getSong()),this.onsongchange&&this.onsongchange(),this.getSong()):void 0},Song.prototype.resetSongs=function(){this.playlist.forEach(function(t){t.pause&&t.pause(),t.currentTime&&(t.currentTime=0)})},Song.prototype.getSong=function(){return this.playlist[this.songNumber]},Song.prototype.getAlbum=function(t){var n;n=t?t.getAttribute("data-img"):this.getSong().getAttribute("data-img");var o=document.createElement("img");return o.src=n,o},Song.prototype.getTitle=function(t){var n;return n=t?t.getAttribute("data-title"):this.getSong().getAttribute("data-title"),n?n:void 0},Song}();